# Git Commit 提交规范说明

## 概述
本文档规定了项目中 Git commit message 的格式规范，要求使用 commitlint 标准格式，并使用中文描述。所有 AI 助手（包括 GitHub Copilot）在生成 commit message 时必须严格遵循此规范。

## Commit Message 格式

### 基本结构
```
<类型>(<作用域>): <主题>

<正文>

<页脚>
```

### 详细说明

#### 1. 类型（type）- 必填
使用英文关键词，表示本次提交的性质：

- `feat`: 新功能（feature）
- `fix`: 修复 bug
- `docs`: 文档相关变更
- `style`: 代码格式调整（不影响功能的格式化、缺少分号等）
- `refactor`: 重构代码（既不修复 bug 也不添加功能）
- `perf`: 性能优化
- `test`: 添加或修改测试
- `build`: 构建系统或外部依赖的变更（webpack、npm 等）
- `ci`: CI 配置文件和脚本的变更
- `chore`: 其他不修改源代码或测试文件的变更
- `revert`: 回滚之前的提交

#### 2. 作用域（scope）- 可选
用括号包围，表示本次提交影响的范围，使用中文：

- `(用户模块)`: 用户相关功能
- `(订单系统)`: 订单处理相关
- `(支付功能)`: 支付相关功能
- `(数据库)`: 数据库相关变更
- `(API)`: 接口相关变更
- `(前端组件)`: 前端组件相关
- `(配置文件)`: 配置相关变更

#### 3. 主题（subject）- 必填
使用中文，简洁明了地描述本次提交：

- 使用祈使句，动词开头
- 不超过 50 个字符
- 结尾不加句号
- 首字母无需大写

#### 4. 正文（body）- 可选
使用中文详细描述：

- 解释**为什么**进行此次变更，而不是**怎么做**的
- 与之前版本的对比
- 每行不超过 72 个字符
- 多行列举时行头增加列表符号`-`并空一格开始

#### 5. 页脚（footer）- 可选
用于关闭 Issue 或记录重大变更：

- `Closes #123`: 关闭 Issue
- `BREAKING CHANGE`: 重大变更说明

## 示例

### 标准格式示例

#### 新功能
```
feat(用户模块): 添加用户头像上传功能

支持用户上传 jpg、png 格式的头像图片，自动压缩至 200KB 以下。
增加图片格式验证和文件大小限制。

Closes #156
```

#### Bug 修复
```
fix(订单系统): 修复订单状态更新失败的问题

当订单金额为 0 时，状态更新逻辑出现异常。
现已修复金额校验逻辑，确保所有订单状态正常更新。

Fixes #234
```

#### 文档更新
```
docs: 更新 API 接口文档

补充用户登录接口的错误码说明，
添加请求频率限制的详细说明。
```

#### 代码重构
```
refactor(支付功能): 重构支付流程代码结构

将支付相关逻辑拆分为多个独立模块，
```

### 简短格式示例
```
fix: 修复登录页面验证码显示异常
feat: 新增商品搜索功能
docs: 更新部署文档
style: 统一代码缩进格式
test: 添加用户注册单元测试
```

## 重点要求

### ✅ 正确示例
- `feat(用户模块): 添加密码重置功能`
- `fix: 修复页面加载缓慢问题`
- `docs(API): 更新接口文档格式`
- `refactor: 优化数据库查询性能`

### ❌ 错误示例
- `添加新功能` - 缺少类型前缀
- `fix bug` - 使用英文主题且不够具体
- `feat: Add user login` - 主题使用英文
- `修复了一个小问题` - 缺少类型前缀且描述不清晰

## Copilot 使用指南

当使用 GitHub Copilot 或其他 AI 工具生成 commit message 时，请确保：

1. **严格按照上述格式**：类型(作用域): 中文主题
2. **类型必须准确**：根据实际变更选择正确的类型
3. **主题描述清晰**：用中文简洁描述做了什么
4. **避免无意义描述**：如"修改代码"、"更新文件"等
5. **保持一致性**：团队内使用统一的作用域命名

## 验证工具

推荐使用以下工具验证 commit message 格式：

- `@commitlint/cli`: 命令行验证工具
- `@commitlint/config-conventional`: 标准配置
- `husky`: Git hooks 工具，在提交前自动验证

## 配置文件示例

```json
// commitlint.config.js
module.exports = {
  extends: ['@commitlint/config-conventional'],
  rules: {
    'type-enum': [2, 'always', [
      'feat', 'fix', 'docs', 'style', 'refactor', 
      'perf', 'test', 'build', 'ci', 'chore', 'revert'
    ]],
    'subject-case': [0], // 允许中文主题
    'subject-max-length': [2, 'always', 50]
  }
}
```
